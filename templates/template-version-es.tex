\documentclass[12pt,a4paper]{book}
\usepackage{geometry}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{setspace}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{array}
\usepackage{enumitem}
\usepackage{listings}
\usepackage{pdflscape}
\usepackage{textcomp}
\usepackage{caption}
\usepackage{etoolbox}

% Fix for footnotes in tables
\usepackage{footnote}
\makesavenoteenv{longtable}
\makesavenoteenv{table}

% Additional packages for handling large documents
\usepackage{etex}

% Define the missing tightlist command that pandoc expects
\providecommand{\tightlist}{\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% Define colors
\definecolor{chaptercolor}{RGB}{0, 83, 156}
\definecolor{versioncolor}{RGB}{100, 100, 100}

% Set page geometry
\geometry{margin=1in }

% Configure section formatting
\titleformat{\chapter}[display]{\normalfont\huge\bfseries\color{chaptercolor}}{\chaptertitlename\ \thechapter}{20pt}{\Huge}
\titleformat{\section}{\normalfont\Large\bfseries\color{chaptercolor}}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\large\bfseries}{\thesubsection}{1em}{}

% Always start sections on a new page
\newcommand{\sectionbreak}{\clearpage}

% Define version and build date commands
\newcommand{\bookversion}{2025-03-17}
\newcommand{\builddate}{March 16, 2025 19:28}
\newcommand{\langsetting}{es}

% Bilingual title commands
\newcommand{\entitle}{Rise \& Code}
\newcommand{\estitle}{Lev√°ntate y Codifica}

% Choose title based on language setting
\newcommand{\booktitle}{%
  \ifx\langsetting es
    \estitle
  \else
    \entitle
  \fi
}

% Configure headers and footers
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\booktitle}
\fancyhead[RE,LO]{\leftmark}
\fancyfoot[C]{\thepage}
\fancyfoot[R]{\textcolor{versioncolor}{\footnotesize{v\bookversion}}}

% Add a footer rule
\renewcommand{\footrulewidth}{0.4pt}

% Plain style for chapter pages
\fancypagestyle{plain}{%
  \fancyhf{}
  \fancyfoot[C]{\thepage}
  \fancyfoot[R]{\textcolor{versioncolor}{\footnotesize{v\bookversion}}}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0.4pt}
}

% Title page information
\title{\Huge \booktitle\\\large A Programming Book for Everyone}
\author{Open Source Community}
\date{\today}

\begin{document}

$if(title)$
\maketitle
$endif$

$if(toc)$
\tableofcontents
\clearpage
$endif$

$body$

\end{document}